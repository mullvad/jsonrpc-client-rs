# jsonrpc-client-http

HTTP transport implementation for the JSON-RPC 2.0 clients generated by `jsonrpc-client-core`.

Uses the async Tokio based version of Hyper to implement a JSON-RPC 2.0 compliant HTTP
transport.

## Reusing connections

Each `HttpTransport` instance is backed by exactly one Hyper `Client` and all `HttpHandle`s
created through the same `HttpTransport` also point to that one `Client` instance.

By default Hyper `Client`s have keep-alive activated and open connections will be kept and
reused.

## TLS / HTTPS

TLS support is compiled if the "tls" feature is activated (it is active by default).

All the TLS support adds is the convenient builder constructor with TLS activated, at
`HttpTransport::tls_builder()`.

## Usage

```rust
#[macro_use] extern crate jsonrpc_client_core;
extern crate jsonrpc_client_http;

use jsonrpc_client_http::HttpTransport;

jsonrpc_client!(pub struct FizzBuzzClient {
    /// Returns the fizz-buzz string for the given number.
    pub fn fizz_buzz(&mut self, number: u64) -> RpcRequest<String>;
});

fn main() {
    let transport = HttpTransport::tls_builder().build().unwrap();
    let transport_handle = transport.handle("https://api.fizzbuzzexample.org/rpc/").unwrap();
    let mut client = FizzBuzzClient::new(transport_handle);
    let result1 = client.fizz_buzz(3).call().unwrap();
    let result2 = client.fizz_buzz(4).call().unwrap();
    let result3 = client.fizz_buzz(5).call().unwrap();

    // Should print "fizz 4 buzz" if the server implemented the service correctly
    println!("{} {} {}", result1, result2, result3);
}
```

License: MIT/Apache-2.0
